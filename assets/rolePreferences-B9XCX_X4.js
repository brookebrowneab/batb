import{f as _,a as u}from"./scheduling-DSZ8OVmG.js";function h(t){return(t==null?void 0:t.vocal_mode)==="day_assignment"}function v(t,s){const e=[];if(!Array.isArray(t)||t.length===0)return{valid:!0,errors:[]};const o=new Set(s.map(a=>a.id)),n=new Set,r=new Set;for(const a of t)(!a.roleId||!o.has(a.roleId))&&e.push("Invalid role selection."),r.has(a.roleId)&&e.push("Duplicate role selected."),r.add(a.roleId),(!Number.isInteger(a.rank)||a.rank<1)&&e.push("Rank must be a positive integer."),n.has(a.rank)&&e.push(`Duplicate rank: ${a.rank}. Each role must have a unique rank.`),n.add(a.rank);return{valid:e.length===0,errors:e}}function f(t){return[...t].sort((s,e)=>s.rank_order-e.rank_order)}function y(t,s){const e=new Map,o=new Map(s.map(n=>[n.id,n]));for(const n of s)e.set(n.id,{role:n,students:[]});e.set("__none__",{role:null,students:[]});for(const n of t){const r=n.role_preferences||[],i=f(r)[0];i&&o.has(i.audition_role_id)?e.get(i.audition_role_id).students.push(n):e.get("__none__").students.push(n)}return e}function k(t,s,e){const o=e.find(m=>m.audition_date===s),n=_(s),r=o!=null&&o.vocal_start_time&&(o!=null&&o.vocal_end_time)?`${u(o.vocal_start_time)} – ${u(o.vocal_end_time)}`:"TBD",a=t.parent_first_name||"Parent/Guardian",i=`${t.first_name||""} ${t.last_name||""}`.trim()||"your student",l="Vocal Audition Day Assignment — BATB Auditions",d=[`Dear ${a},`,"",`${i} has been assigned to the following vocal audition day:`,"",`Date: ${n}`,`Time: ${r}`,"","Please arrive at least 15 minutes early. If you have any questions, contact the production team.","","Break a leg!","Beauty and the Beast Auditions Team"].join(`
`),c=d.length>200?d.slice(0,200)+"…":d;return{subject:l,body:d,bodyPreview:c}}export{y as a,k as g,h as i,f as s,v};
