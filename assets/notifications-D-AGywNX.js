import{d as l}from"./index-DqAzOXqH.js";async function f(e){if(!e)return null;const t=e.context;if(!t||typeof t.text!="function")return e;let s="";try{s=await t.text()}catch{return e}let a=s;try{const n=JSON.parse(s);a=(n==null?void 0:n.error)||(n==null?void 0:n.message)||s}catch{}const o=typeof t.status=="number"?t.status:null,r=o?` (status ${o})`:"";return new Error(`${a||e.message}${r}`)}async function h({to:e,subject:t,text:s,html:a=null}){var i;const{data:o}=await l.auth.getSession(),r=((i=o==null?void 0:o.session)==null?void 0:i.access_token)||null,n=r?{Authorization:`Bearer ${r}`}:void 0,{data:d,error:c}=await l.functions.invoke("send-notification-email",{body:{to:e,subject:t,text:s,html:a},headers:n}),u=await f(c);return{data:d,error:u}}async function y(e){var c,u,i;const{data:t}=await l.auth.getSession(),s=((c=t==null?void 0:t.session)==null?void 0:c.access_token)||null,a=((i=(u=t==null?void 0:t.session)==null?void 0:u.user)==null?void 0:i.id)||null,o=s?{Authorization:`Bearer ${s}`}:void 0,{data:r,error:n}=await l.functions.invoke("send-registration-schedule-email",{body:{studentId:e,userId:a},headers:o}),d=await f(n);return{data:r,error:d}}export{h as a,y as s};
