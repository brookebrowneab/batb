import{d as a}from"./index-BKdYyjDr.js";async function d(){const{data:t,error:e}=await a.from("contracts").select("*").order("version_number",{ascending:!0});return{data:t||[],error:e}}async function u(){const{data:t,error:e}=await a.from("contracts").select("*").eq("is_active",!0).maybeSingle();return{data:t,error:e}}async function _(t,e,r){const{data:c,error:n}=await a.from("contracts").insert({version_number:t,text_snapshot:e,is_active:!1,created_by_staff_user_id:r}).select().single();return{data:c,error:n}}async function f(t){const{error:e}=await a.rpc("activate_contract",{p_contract_id:t});return{error:e}}async function p(t){const{data:e,error:r}=await a.from("contract_acceptances").select("*, contracts(version_number, text_snapshot)").eq("student_id",t).order("created_at",{ascending:!0});return{data:e||[],error:r}}async function m({studentId:t,contractId:e,studentTypedSignature:r,parentTypedSignature:c,signedByUserId:n}){const{data:s,error:o}=await a.from("contract_acceptances").insert({student_id:t,contract_id:e,student_typed_signature:r,parent_typed_signature:c,signed_by_user_id:n}).select().single();return{data:s,error:o}}export{p as a,d as b,_ as c,m as d,u as f,f as s};
