import{d as a}from"./index-CvLlIQq8.js";async function d(){const{data:t,error:e}=await a.from("contracts").select("*").order("version_number",{ascending:!0});return{data:t||[],error:e}}async function u(){const{data:t,error:e}=await a.from("contracts").select("*").order("version_number",{ascending:!1}).limit(1).maybeSingle();return{data:t,error:e}}async function _(t,e,r){const{data:n,error:c}=await a.from("contracts").insert({version_number:t,text_snapshot:e,is_active:!1,created_by_staff_user_id:r}).select().single();return{data:n,error:c}}async function f(t){const{error:e}=await a.rpc("activate_contract",{p_contract_id:t});return{error:e}}async function m(t){const{data:e,error:r}=await a.from("contract_acceptances").select("*, contracts(version_number, text_snapshot)").eq("student_id",t).order("created_at",{ascending:!0});return{data:e||[],error:r}}async function p({studentId:t,contractId:e,studentTypedSignature:r,parentTypedSignature:n,signedByUserId:c}){const{data:s,error:o}=await a.from("contract_acceptances").insert({student_id:t,contract_id:e,student_typed_signature:r,parent_typed_signature:n,signed_by_user_id:c}).select().single();return{data:s,error:o}}export{m as a,d as b,_ as c,p as d,u as f,f as s};
